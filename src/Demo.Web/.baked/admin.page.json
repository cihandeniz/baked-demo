{
  "type": "SimplePage",
  "schema": {
    "title": {
      "type": "PageTitle",
      "schema": {
        "title": "Admin",
        "description": "Manage data",
        "actions": [
          {
            "type": "Button",
            "schema": {
              "label": "Seed Data"
            },
            "action": {
              "type": "Remote",
              "path": "admin/seed-data",
              "method": "POST",
              "postAction": {
                "type": "Publish",
                "event": "seed-data"
              }
            }
          },
          {
            "type": "SimpleForm",
            "schema": {
              "title": "Add Work",
              "submit": {
                "label": "Add Work",
                "severity": "primary"
              },
              "inputs": [
                {
                  "name": "name",
                  "required": true,
                  "component": {
                    "type": "InputText",
                    "schema": {
                      "label": "Name"
                    }
                  }
                }
              ],
              "dialogOptions": {
                "open": {
                  "icon": "pi pi-plus",
                  "label": "Add Work"
                },
                "cancel": {
                  "label": "Cancel",
                  "variant": "text"
                }
              }
            },
            "action": {
              "type": "Remote",
              "path": "admin/works",
              "method": "POST",
              "body": {
                "type": "Context",
                "key": "model"
              },
              "postAction": {
                "type": "Publish",
                "event": "add-work",
                "data": {
                  "type": "Context",
                  "key": "response"
                }
              }
            }
          },
          {
            "type": "SimpleForm",
            "schema": {
              "title": "Add Contributor",
              "submit": {
                "label": "Add Contributor",
                "severity": "primary"
              },
              "inputs": [
                {
                  "name": "name",
                  "required": true,
                  "component": {
                    "type": "InputText",
                    "schema": {
                      "label": "Name"
                    }
                  }
                }
              ],
              "dialogOptions": {
                "open": {
                  "icon": "pi pi-plus",
                  "label": "Add Contributor"
                },
                "cancel": {
                  "label": "Cancel",
                  "variant": "text"
                }
              }
            },
            "action": {
              "type": "Remote",
              "path": "admin/contributors",
              "method": "POST",
              "body": {
                "type": "Context",
                "key": "model"
              },
              "postAction": {
                "type": "Publish",
                "event": "add-contributor",
                "data": {
                  "type": "Context",
                  "key": "response"
                }
              }
            }
          }
        ]
      }
    },
    "contents": [
      {
        "component": {
          "type": "DataPanel",
          "schema": {
            "title": {
              "type": "Inline",
              "value": "GetWorks"
            },
            "localizeTitle": true,
            "inputs": [],
            "content": {
              "type": "DataTable",
              "schema": {
                "columns": [
                  {
                    "key": "name",
                    "component": {
                      "type": "Text",
                      "schema": {},
                      "data": {
                        "type": "Context",
                        "key": "parent",
                        "prop": "row.name"
                      }
                    },
                    "title": "Name",
                    "minWidth": true,
                    "exportable": true,
                    "frozen": true
                  }
                ],
                "dataKey": "id",
                "paginator": true,
                "rows": 5,
                "actions": {
                  "key": "Actions",
                  "component": {
                    "type": "Composite",
                    "schema": {
                      "parts": [
                        {
                          "type": "SimpleForm",
                          "schema": {
                            "title": "Delete",
                            "submit": {
                              "label": "Delete",
                              "severity": "danger"
                            },
                            "inputs": [],
                            "dialogOptions": {
                              "open": {
                                "icon": "pi pi-trash",
                                "label": "",
                                "variant": "text",
                                "rounded": true
                              },
                              "cancel": {
                                "label": "Cancel",
                                "variant": "text"
                              },
                              "message": "Are you sure?"
                            }
                          },
                          "action": {
                            "type": "Remote",
                            "path": "works/{id:guid}/",
                            "method": "DELETE",
                            "params": {
                              "type": "Context",
                              "key": "parent",
                              "prop": "row"
                            },
                            "postAction": {
                              "type": "Publish",
                              "event": "delete"
                            }
                          }
                        }
                      ]
                    }
                  },
                  "alignRight": true,
                  "exportable": false,
                  "frozen": true
                }
              },
              "data": {
                "type": "Remote",
                "path": "admin/works",
                "query": {
                  "type": "Computed",
                  "composable": "useNuxtRoute",
                  "options": {
                    "type": "Inline",
                    "value": {
                      "property": "query"
                    }
                  }
                }
              },
              "reactions": {
                "reload": {
                  "type": "Composite",
                  "parts": [
                    {
                      "type": "On",
                      "on": "delete"
                    },
                    {
                      "type": "On",
                      "on": "add-work"
                    },
                    {
                      "type": "On",
                      "on": "seed-data"
                    }
                  ]
                }
              }
            }
          }
        },
        "key": "get-works"
      },
      {
        "component": {
          "type": "DataPanel",
          "schema": {
            "title": {
              "type": "Inline",
              "value": "GetContributors"
            },
            "localizeTitle": true,
            "inputs": [],
            "content": {
              "type": "DataTable",
              "schema": {
                "columns": [
                  {
                    "key": "name",
                    "component": {
                      "type": "Text",
                      "schema": {},
                      "data": {
                        "type": "Context",
                        "key": "parent",
                        "prop": "row.name"
                      }
                    },
                    "title": "Name",
                    "minWidth": true,
                    "exportable": true,
                    "frozen": true
                  }
                ],
                "dataKey": "id",
                "paginator": true,
                "rows": 5,
                "actions": {
                  "key": "Actions",
                  "component": {
                    "type": "Composite",
                    "schema": {
                      "parts": [
                        {
                          "type": "SimpleForm",
                          "schema": {
                            "title": "Delete",
                            "submit": {
                              "label": "Delete",
                              "severity": "danger"
                            },
                            "inputs": [],
                            "dialogOptions": {
                              "open": {
                                "icon": "pi pi-trash",
                                "label": "",
                                "variant": "text",
                                "rounded": true
                              },
                              "cancel": {
                                "label": "Cancel",
                                "variant": "text"
                              },
                              "message": "Are you sure?"
                            }
                          },
                          "action": {
                            "type": "Remote",
                            "path": "contributors/{id:guid}/",
                            "method": "DELETE",
                            "params": {
                              "type": "Context",
                              "key": "parent",
                              "prop": "row"
                            },
                            "postAction": {
                              "type": "Publish",
                              "event": "delete"
                            }
                          }
                        }
                      ]
                    }
                  },
                  "alignRight": true,
                  "exportable": false,
                  "frozen": true
                }
              },
              "data": {
                "type": "Remote",
                "path": "admin/contributors",
                "query": {
                  "type": "Computed",
                  "composable": "useNuxtRoute",
                  "options": {
                    "type": "Inline",
                    "value": {
                      "property": "query"
                    }
                  }
                }
              },
              "reactions": {
                "reload": {
                  "type": "Composite",
                  "parts": [
                    {
                      "type": "On",
                      "on": "delete"
                    },
                    {
                      "type": "On",
                      "on": "add-contributor"
                    },
                    {
                      "type": "On",
                      "on": "seed-data"
                    }
                  ]
                }
              }
            }
          }
        },
        "key": "get-contributors"
      }
    ],
    "path": "admin"
  }
}